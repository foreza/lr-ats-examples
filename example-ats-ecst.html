<!DOCTYPE html>
<html lang="en">

<head>
    <title>eCST with GTM</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="description" content="" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />

    <!-- Privacy manager for web -->
    <link rel="preload" href="https://gdpr.privacymanager.io/latest/gdpr.bundle.js" as="script" />
    <script src="https://gdpr-wrapper.privacymanager.io/gdpr/13e87290-1c20-420b-8cc9-621c02f6409a/gdpr-liveramp.js">
    </script>

    <!-- ATS on page -->
    <!-- <script
        src="https://ats-wrapper.privacymanager.io/ats-modules/2bc4da3a-b0ae-49bb-8dbe-eb3d05ecbd38/ats.js"></script> -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <!-- https://tagmanager.google.com/#/container/accounts/6005930370/containers/58839664/workspaces/7/tags -->

    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-5TW2GDX');</script>
    <!-- End Google Tag Manager -->

</head>

<body>

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5TW2GDX" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="container">

        <h1>Hello there.</h1>
        <p>This page features a sample LiveRamp eCST being loaded over google tag manager.</p>
        <p>Check your network inspector to see the API calls being made.</p>

    </div>

    <div class="container">
        <p>This will call: triggerECST("isAmazingUser=true,key2=value2");</p>
        <p>Feel free to invoke this with different params/pdata to see the results.</p>
        <button onclick="sampleECSTCall()">Call eCST (sample pdata)</button>
    </div>

    <div class="container">
        <p>This will use ATS to send an example user email for an envelope</p>
        <button onclick="setSampleEnvelope()">Set sample test envelope</button>
    </div>


    <a onclick="__tcfapi('showConsentManager')" href="javascript:void(0);">Privacy Settings</a>

</body>


<script>
    // Assumes google tag manager is loaded, and that triggerECST is defined
    function sampleECSTCall() {
        triggerECST("isAmazingUser=true,key2=value2");
    }

    // Assume ATS is loaded.
    function setSampleEnvelope() {
        atsenvelopemodule.setAdditionalData({
            'type': 'email',
            'id': "jason.chiu@liveramp.com"
        });
    }
</script>

</html>